// src/main/components/Article/Carousel/Carousel.module.scss

.carouselContainer {
  --transition-duration: 300ms;
  position: relative;
  overflow: hidden;
  
  // ðŸ”„ KEEP THIS - Fallback for browsers that don't support aspect-ratio
  min-height: var(--fallback-height, 400px);
  
  // ðŸ”„ ADD THIS - Safety constraint to prevent oversized carousels
  max-height: var(--carousel-max-height, 800px);
  
  // Modern browsers with aspect-ratio support
  @supports (aspect-ratio: 1) {
    // ðŸ”„ COMMENT OUT OR REMOVE THIS LINE:
    // min-height: unset;  // DON'T unset - keep as safety net
    
    // ðŸ”„ ADD FALLBACK VALUES to these aspect-ratio declarations:
    aspect-ratio: var(--desktop-landscape-ratio, 1.5);
    
    // Mobile Portrait
    @media (max-width: 767px) and (orientation: portrait) {
      aspect-ratio: var(--mobile-portrait-ratio, 0.8);
      // ðŸ”„ ADD THIS - Prevent mobile overflow
      max-height: calc(100vh - 200px);
    }
    
    // Mobile Landscape
    @media (max-width: 767px) and (orientation: landscape) {
      aspect-ratio: var(--mobile-landscape-ratio, 1.33);
      // ðŸ”„ ADD THIS - Prevent mobile landscape overflow
      max-height: calc(100vh - 150px);
    }
    
    // Tablet Portrait
    @media (min-width: 768px) and (max-width: 1023px) and (orientation: portrait) {
      aspect-ratio: var(--tablet-portrait-ratio, 1);
      // ðŸ”„ ADD THIS
      max-height: calc(100vh - 250px);
    }
    
    // Tablet Landscape
    @media (min-width: 768px) and (max-width: 1023px) and (orientation: landscape) {
      aspect-ratio: var(--tablet-landscape-ratio, 1.33);
      // ðŸ”„ ADD THIS
      max-height: calc(100vh - 200px);
    }
    
    // Desktop Portrait
    @media (min-width: 1024px) and (orientation: portrait) {
      aspect-ratio: var(--desktop-portrait-ratio, 1);
      // ðŸ”„ ADD THIS
      max-height: calc(100vh - 300px);
    }
    
    // Desktop Landscape
    @media (min-width: 1024px) and (orientation: landscape) {
      aspect-ratio: var(--desktop-landscape-ratio, 1.5);
      // ðŸ”„ ADD THIS
      max-height: calc(100vh - 250px);
    }
  }
}

// KEEP THE REST OF YOUR EXISTING STYLES:
.slide {
  transition: opacity var(--transition-duration) ease-in-out;
}

.carouselImage {
  transition: transform var(--transition-duration) ease-in-out;
  
  &.center-horizontal {
    object-position: center;
  }
  
  &.center-vertical {
    object-position: center;
  }
  
  &.square {
    object-fit: cover;
  }
}

.caption {
  transition: transform var(--transition-duration) ease-in-out,
              opacity var(--transition-duration) ease-in-out;
}